<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ASEAN UNION</title>

  <!-- Bootstrap & HTMX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <script src="https://unpkg.com/htmx.org@1.9.2"></script>

  <!-- Ethers.js (IIFE version, attaches to global `ethers`) -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.10.0/dist/ethers.umd.min.js"></script>

  <!-- Custom Web3 Wallet Logic -->
  <script src="js/web3.js" defer></script>

  <!-- Hook to auto-run module init on HTMX load -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener('htmx:afterSettle', function (evt) {
      const el = evt.target;

      // Auto-run init function if element is present
      if (el.querySelector('#citizen-section') && typeof initCitizen === 'function') {
        initCitizen();
      }

      if (el.querySelector('#migration-section') && typeof initMigration === 'function') {
        initMigration();
      }

      if (el.querySelector('#funding-section') && typeof initFunding === 'function') {
        initFunding();
      }

      if (el.querySelector('#governance-section') && typeof initGovernance === 'function') {
        initGovernance();
      }

      if (el.querySelector('#election-section') && typeof initElection === 'function') {
        initElection();
      }

      if (el.querySelector('#marketplace-section') && typeof initMarketplace === 'function') {
        initMarketplace();
      }

      if (el.querySelector('#staking-section') && typeof initStaking === 'function') {
        initStaking();
      }

      if (el.querySelector('#supplychain-section') && typeof initSupplyChain === 'function') {
        initSupplyChain();
      }

      if (el.querySelector('#document-section') && typeof initDocuments === 'function') {
        initDocuments();
      }
    });
  });
</script>

</head>

<body class="bg-light">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary px-3">
    <a class="navbar-brand" href="#">üåè ASEAN UNION</a>
    <div class="ms-auto">
      <button  id="connectBtn" class="btn btn-outline-light" onclick="connectWallet()">Connect Wallet</button>
      <span id="walletAddress" class="text-white ms-2"></span>
    </div>
  </nav>

  <!-- Tabs -->
  <div class="container mt-4">
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link active"
           hx-get="modules/citizen.html"
           hx-target="#tabContent"
           hx-trigger="load"
           href="#">JOIN</a>
      </li>
      <li class="nav-item"><a class="nav-link" hx-get="modules/country.html" hx-target="#tabContent" href="#">Countries</a></li>
      <li class="nav-item"><a class="nav-link" hx-get="modules/governance.html" hx-target="#tabContent" href="#">Governance</a></li>
      <li class="nav-item"><a class="nav-link" hx-get="modules/funding.html" hx-target="#tabContent" href="#">Funding</a></li>
      <li class="nav-item"><a class="nav-link" hx-get="modules/migration.html" hx-target="#tabContent" href="#">Migration</a></li>
      <li class="nav-item"><a class="nav-link" hx-get="modules/marketplace.html" hx-target="#tabContent" href="#">Marketplace</a></li>
      <li class="nav-item"><a class="nav-link" hx-get="modules/election.html" hx-target="#tabContent" href="#">Election</a></li>
      <li class="nav-item"><a class="nav-link" hx-get="modules/documents.html" hx-target="#tabContent" href="#">Documents</a></li>
      <li class="nav-item"><a class="nav-link" hx-get="modules/supplychain.html" hx-target="#tabContent" href="#">Shipping</a></li>
    </ul>

    <div id="tabContent" class="mt-4">
      <!-- Dynamic content from HTMX modules will load here -->
    </div>
  </div>

</body>
</html>
